sudo: false
language: python
cache: pip
python:
- 3.6
install: make requirements
script: echo "Running tests ..."
stages:
- lint
- test
- name: deploy
  if: branch = master
- notify
jobs:
  include:
  - stage: lint
    script: make lint
  - stage: test
    script: make test
    env:
    - export MONGO="mongokey"
    - export EMAIL_USERNAME="u"
    - export EMAIL_PASSWORD="p"
  - stage: deploy
    script: skip
    deploy:
      provider: heroku
      api_key:
        secure: gt3frjOfE08il8ba0AlzccQkLmExdybsrmzDASXqj1oC3USKIKR6tmmAqa8cdNZdxDfxddgDMmWOA9oIz+NzcLBfn3oJSpiNfoNQcVm3K48ToKpQnOuwkriCY5n/Bcrjm1PZOJl4Lg2AEa6LGLQeLVm2jTb6jzoI7/Gfq6a3vfXYskojs1nZFjHoJF/U9ULzsE4SqOwSezUd4vumXmzKimDS1ohy28P/+gwB6tg438V2CPR4Xok8QzUZITfPw0Mh/WAIGNlc/dNzkjePAm/Opi/3A01SqD9bdtio9AU1U2/sMWoKHE3LgBAQZZWBfWx5w1AlD+6GvoG1lvlO7EaOAZ2hRE7DpnkS+MIzLTpAnR5CdM5mAimIL6HLFyb+xzbqLCk+j43a9u67cBo/VQ2alky0D6BFAxa5ZVO2jZqRvbgI61A6yRNIjnBHKgc6NNea0iboglFcoAGai+PA6GM1G6ajskRydzBfcLOJhTvty6KSTyOs3yY3Y8ZY0/TAKq1Et4g31olAsULqzemJDtl3AZLbO2D6ifwubyIBDN8dguAtwiCx0dQDG89moA6H7Gh5vwcARX1F/9WVmozlmaEt5tO+NBy5sedJhOWGYiCEmCTSiky6L5a0aLq7tXHWnfFUPH9EHJ/kQjVnzv9nf9dg7WbzEgNEiYg1XA5OwKzY2QI=
      app: nisb-auth
  - stage: notify
    notifications:
      email: mridul.kepler@gmail.com
